<% content_for :title do %>
  Profile | Knack Registry
<% end %>
<% content_for :head do %>
    <%= stylesheet_link_tag "/stylesheets/jquery-ui-1.8.2.custom.css" %>
    <%= stylesheet_link_tag "/javascripts/jcrop/css/jquery.Jcrop.css" %>
    <%= stylesheet_link_tag "/stylesheets/Pages/Profile.css" %>
    <%= stylesheet_link_tag "/stylesheets/Pages/partnerprofile.css" %>
    <%= javascript_include_tag "/javascripts/jquery.form.js"  %>
    <%= javascript_include_tag "/javascripts/jquery.simplemodal.1.4.1.min.js"  %>
    <%= javascript_include_tag "/javascripts/jcrop/js/adding.js"  %>
    <%= javascript_include_tag "/javascripts/jcrop/js/jquery.Jcrop.js"  %>
    <%= javascript_include_tag "/javascripts/pages/Partnerprofile.js"  %>
    <%= javascript_include_tag "/javascripts/jquery-ui-1.8.2.custom.min.js"  %>
    <%= javascript_include_tag "/javascripts/controls/_pop-up.js"%>
<%end%>

  <% content_for :pagename do %>
    <div>Profile</div>
  <% end %>

  <% content_for :registry do %>
      <div class="bl-block">
        <div class="blue-line">

        </div>
      </div>
  <% end %>

  <% content_for :background do %>
      <div class="bl-block">
        <div class="blue-line">
          <input type="hidden" value="fghj"/>
        </div>
      </div>
  <% end %>

  <div class="withBackground">
    <div class="content">
      <div class="mainBlock">
        <table class="tbl-profile" cellpadding="0px" cellspacing="0px" border="0px">
        <tr>
          <td class="leftMenu">
            <%= render :partial => "left_menu" %>
            <a href="/partner/upload_image" id="change-picture"> Change Image </a>
          </td>
          </td>
          <td class="rigthPane">

            <div class="div-profile">
              <% unless @is_saved.blank? %>
                <div class="success-save">
                  <img class="img-apply" src="/images/apply.png"/><div class="success-text">Your changes has been saved.</div>
                </div>
              <% end %>
              <%# form_tag({:controller => :partner, :action => :partnerprofile}, :id => 'profile_form') do%>
                <div class="wrap-profile">
                    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>" />
                    <div id="div-profile">
                      <div class="ownerHeader">
                        Login information
                      </div>
                      <%#*------------------------------%>
                      <%#*Email%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="Email">Email<i>(Login)</i> *</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :partner, :Email-%>
                        </div>
                        <div class="editor-error">
                          <%= error_message_on :partner, :Email, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Set new password%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label>Set new password </label>
                        </div>
                        <div class="editor-field">
                          <input type="checkbox" id="passwordCheck" name="passCheck" <%= @passCheck %>></input>
                        </div>
                      </div>


                      <div class="passwordBlock">
                        <%#*------------------------------%>
                        <%#*Old password%>
                        <%#*------------------------------%>
                        <div class="div-block">
                          <div class="editor-label">
                                <label for="OldPassword">Old password *</label>
                          </div>
                          <div class="editor-field">
                            <input type="password" id="oldpassword" name="oldpassword" value="<%=@oldpassword%>"/>

                          </div>
                          <div class="editor-error">
                            <div class="formError"><%= @err_oldpassword %></div>
                          </div>
                        </div>

                        <%#*------------------------------%>
                        <%#*New password%>
                        <%#*------------------------------%>
                        <div class="div-block">
                          <div class="editor-label">
                            <label for="NewPassword">New password *</label>
                          </div>
                          <div class="editor-field">
                            <input type="password" id="newpassword" name="newpassword" value="<%=@newpassword%>"/>

                          </div>
                          <div class="editor-error">
                            <div class="formError"><%= @err_newpassword %></div>
                          </div>
                        </div>

                        <div class="emptyBlock">
                        </div>
                      </div>
                        <input type="hidden" id="iscomplete" name="iscomplete"/>
                    </div>

                    <div id="div-store">
                      <div class="ownerHeader">
                        Store information
                      </div>

                      <%#*------------------------------%>
                      <%#*Store name%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="PartnerName">Store Name *</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :Name-%>

                        </div>
                        <div class="editor-error">
                          <%= error_message_on :store, :Name, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Street%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="Street">Street *</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :Street-%>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :store, :Street, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*City%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="City">City *</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :City-%>

                        </div>
                        <div class="editor-error">
                          <%= error_message_on :store, :City, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*State%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="State">State *</label>
                        </div>
                        <div class="editor-field">
                          <div style="display: none">
                            <%= select(:store1, :State_ID, @states.collect {|s| [s.Name, s.id]}) %>
                          </div>
                          <%= select(:store, :State_ID, @states.collect {|s| [s.Name, s.id]}) %>
                        </div>
                        <div class="editor-error">
                          <%= error_message_on :store, :State_ID, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*ZIP%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="ZIP">ZIP *</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :ZIP-%>

                        </div>
                        <div class="editor-error">
                          <%= error_message_on :store, :ZIP, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Phone%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="PhoneNumber">Phone</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :Phone-%>

                        </div>

                        <div class="editor-error">
                          <%= error_message_on :store, :Phone, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Email%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="Email">Email</label>
                        </div>
                        <div class="editor-field">
                          <%=text_field :store, :Email-%>
                        </div>
                        <div class="editor-error">
                          <%= error_message_on :store, :Email, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Add stores%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <div style="visibility: hidden">df</div>
                        </div>
                        <div class="editor-field add-store">
                          <%= link_to "Add store", :controller => :partner, :action => :storeslist %>
                        </div>
                      </div>

                    </div>

                     <%#*------------------------------%>
                     <%#*BillingInformation%>
                     <%#*------------------------------%>
                     <div class="BillingInfo">
                      <div class="BillingHeader">
                        Partner billing address <input type="checkbox" id="use_store" name="use_store" value="<%= @use_store %>"/>
                        <span class="span-use">The same as store address</span>
                        <input type="hidden" name="set_use" id="set_use"/>
                      </div>

                      <%#*------------------------------%>
                      <%#*Billing Name%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingName">First Name *</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingName %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingName, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingLastName%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingLastName">Last Name *</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingLastName %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingLastName, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingStreet%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingStreet">Street</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingStreet %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingStreet, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingCity%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingCity">City *</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingCity %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingCity, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingState%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingState_ID">State *</label>
                        </div>
                        <div class="editor-field">
                          <%= select(:partner, :BillingState_ID, @states.collect {|s| [s.Name, s.id]}) %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingState_ID, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>


                      <%#*------------------------------%>
                      <%#*BillingZIP%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingZIP">ZIP *</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingZIP %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingZIP, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingPhone%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingPhone">Phone</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingPhone %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingPhone, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*BillingEmail%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="BillingEmail">Email *</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :BillingEmail %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :BillingEmail, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                    </div>

                    <%#*------------------------------%>
                    <%#*Additional information%>
                    <%#*------------------------------%>
                    <div class="paymentInfo">
                      <div class="paymentHeader">
                        Additional information
                      </div>

                      <%#*------------------------------%>
                      <%#*WebSite%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          <label for="WebSite">Website</label>
                        </div>
                        <div class="editor-field">
                          <%= text_field :partner, :WebSite %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :WebSite, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>

                      <%#*------------------------------%>
                      <%#*Description%>
                      <%#*------------------------------%>
                      <div class="div-block description-block">
                        <div class="editor-label">
                          <label for="Description">Description</label>
                        </div>
                        <div class="editor-field">
                          <%= text_area :partner, :Description, :cols => 23, :rows => 5 %>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :Description, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                        </div>
                      </div>
                    </div>

                    <%#*------------------------------%>
                    <%#*PayPal%>
                    <%#*------------------------------%>
                    <div class="paymentInfo">
                      <div class="paymentHeader">
                        To receive payments from Knack you need an active Pay Pal account
                      </div>

                      <%#*------------------------------%>
                      <%#*PayPayl Account%>
                      <%#*------------------------------%>
                      <div class="div-block">
                        <div class="editor-label">
                          Pay pal Email account
                        </div>
                        <div class="editor-field">
                          <%=text_field :partner, :PayPalAccount%>
                        </div>

                        <div class="editor-error">
                          <%= error_message_on :partner, :PayPalAccount, :prepend_text => StaticDataUtilities.get_prepare_error_message %>
                          <table border="0" cellpadding="0" cellspacing="0" align="center">
                            <tr>
                              <td align="center">
                                <a href="#" onclick="javascript:window.open('https://www.paypal.com/us/cgi-bin/webscr?cmd=_registration-run','toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, width=400, height=350');">
                                  <img  src="/images/design/Buttons/PayPal_mark_50x34.gif" border="0" alt="Acceptance Mark"/>
                                </a>
                              </td>
                            </tr>
                          </table>
                        </div>
                      </div>
                    </div>
                </div>
              <div class="div-block">
                <div class="div-btn-save">
                  <input type="button" id="submit-btn" value="Save"/>
                </div>
              </div>

            </div>

          </td>
        </tr>
      </table>
      </div>
    </div>
  </div>

